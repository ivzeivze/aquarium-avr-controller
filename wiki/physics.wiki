= Introduction =

Some physical issues described here.


== Cooling ==

Project specifications do not make assumptions, how a cooling device looks like. The device knows nothing but only that there is a relay: if it's turned on, the water will get cooler. 

In the particular case of experimental device, a computer chassis ventilator is used as such a device. It's efficiency is, of cause, not great. Experiment shows that it drops about 2 Celsius degrees when turned on.

== Heating ==

Heating is much simpler, because heating devices are generally simpler and are more available that specialized aquarium coolers. In my case, there is an ordinary aquarium heater used: a glass tube with conductive wire inside, having a power of 40 Watts.

== Temperature measurement == 

When fed with power supply, not filtered well, DS1621 thermometer produces noisy measurements. In order to make the system resistant against such situations, averaging is performed before using temperature value to decide about temperature-controlling activities. As for version 0.9.4, the number of measurements to average is 32. It shall be noted, that noise amplitude decreases as N^(-1/2) upon increasing N, assuming that noise values are statistically independent.

== Heater -> DS1621 thermometer on TWI electrical surge issue ==

DS1621 thermometer is connected via TWI interface. If not protected well, the system puts microcontroller in danger from electromagnetical surges. In particular, it an experiment it became obvious that such surges are generated by powering on/off water heater.

Screened twisted pair cable (Cat.5e S/UTP) is used to link thermometer chip with microcontroller. The chip itself is wrapped in copper folder, connected to cable screen. The whole construction is mounted in glass tube and placed in aquarium water. 

== TWI line capacity and pull-up resistor choice ==
According to wikipedia (http://en.wikipedia.org/wiki/Category_5_cable) one color pair has a capacitance of about 50 pf per meter. 1 meter of cable is used. Thus we may (want to be!) be sure that the whole cable capacity is less than 100pf. In Atmel microcontroller datasheet (http://code.google.com/p/aquarium-avr-controller/source/browse/trunk/documentation/datasheets/DOC000151568(ATMega16x).pdf) one can find an restriction for pull-up resistor value: it can't be more than (1000 ns/{line capacity}). Using 100pf as this capacity, we obtain 10k to be the upper limit for pull-up resistor. 

In reality, line capacity is less that 100pf. Because of that, 10k resistors shall work well. 



